{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"概览\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"参考 \"},{\"url\":\"#createroot\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"createRoot(domNode, options?)\"}],\" \"]},{\"url\":\"#root-render\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"root.render(reactNode)\"}],\" \"]},{\"url\":\"#root-unmount\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount()\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"用法 \"},{\"url\":\"#rendering-an-app-fully-built-with-react\",\"depth\":3,\"text\":\"渲染一个完全由 React 构建的应用 \"},{\"url\":\"#rendering-a-page-partially-built-with-react\",\"depth\":3,\"text\":\"渲染一个部分由 React 构建的应用 \"},{\"url\":\"#updating-a-root-component\",\"depth\":3,\"text\":\"更新一个根组件 \"},{\"url\":\"#show-a-dialog-for-uncaught-errors\",\"depth\":3,\"text\":\"Show a dialog for uncaught errors \"},{\"url\":\"#displaying-error-boundary-errors\",\"depth\":3,\"text\":\"Displaying Error Boundary errors \"},{\"url\":\"#displaying-a-dialog-for-recoverable-errors\",\"depth\":3,\"text\":\"Displaying a dialog for recoverable errors \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"错误排查 \"},{\"url\":\"#ive-created-a-root-but-nothing-is-displayed\",\"depth\":3,\"text\":\"我已经创建了一个根节点，但是页面没有显示任何内容 \"},{\"url\":\"#im-getting-an-error-you-passed-a-second-argument-to-root-render\",\"depth\":3,\"text\":\"I’m getting an error: “You passed a second argument to root.render” \"},{\"url\":\"#im-getting-an-error-target-container-is-not-a-dom-element\",\"depth\":3,\"text\":\"I’m getting an error: “Target container is not a DOM element” \"},{\"url\":\"#im-getting-an-error-functions-are-not-valid-as-a-react-child\",\"depth\":3,\"text\":\"我得到了一个异常报错信息：“函数不是合法的 React 子项（Functions are not valid as a React child）” \"},{\"url\":\"#我的服务端渲染的-html-在更新时会全部重新创建\",\"depth\":3,\"text\":\"我的服务端渲染的 HTML 在更新时会全部重新创建 \"}]","content":"[[\"$r\",\"MaxWidth\",\"100\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\" 允许在浏览器的 DOM 节点中创建根节点以显示 React 组件。\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const root = createRoot(domNode, options?)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"参考 \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"createroot\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"createRoot(domNode, options?)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"调用 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\" 以在浏览器 DOM 元素中创建根节点显示内容。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\n\\r\\nconst domNode = document.getElementById('root');\\r\\nconst root = createRoot(domNode);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React 将会为 \",[\"$r\",\"code\",null,{\"children\":\"domNode\"}],\" 创建一个根节点，并控制其中的 DOM。在已经创建根节点之后，需要调用 \",[\"$r\",\"a\",null,{\"href\":\"#root-render\",\"children\":[\"$r\",\"code\",null,{\"children\":\"root.render\"}]}],\" 来显示 React 组件：\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"root.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"对于一个完全用 React 构建的应用程序，通常会调用一个 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\" 来创建它的根节点。而对于一个使用了“少量” React 来创建部分内容的应用程序，则要按具体需求来确定根节点的数量。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"参见下方更多示例\"}],\"。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"参数 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"domNode\"}],\"：一个 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"DOM 元素\"}],\"。React 将为这个 DOM 元素创建一个根节点然后允许你在这个根节点上调用函数，比如 \",[\"$r\",\"code\",null,{\"children\":\"render\"}],\" 来显示渲染的 React 内容。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"可选\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"options\"}],\"：用于配置这个 React 根节点的对象。\"]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"CanaryBadge\",null,{\"title\":\"This feature is only available in the Canary channel\"}],\" \",[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"onCaughtError\"}],\": Callback called when React catches an error in an Error Boundary. Called with the \",[\"$r\",\"code\",null,{\"children\":\"error\"}],\" caught by the Error Boundary, and an \",[\"$r\",\"code\",null,{\"children\":\"errorInfo\"}],\" object containing the \",[\"$r\",\"code\",null,{\"children\":\"componentStack\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"CanaryBadge\",null,{\"title\":\"This feature is only available in the Canary channel\"}],\" \",[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"onUncaughtError\"}],\": Callback called when an error is thrown and not caught by an Error Boundary. Called with the \",[\"$r\",\"code\",null,{\"children\":\"error\"}],\" that was thrown, and an \",[\"$r\",\"code\",null,{\"children\":\"errorInfo\"}],\" object containing the \",[\"$r\",\"code\",null,{\"children\":\"componentStack\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"onRecoverableError\"}],\": Callback called when React automatically recovers from errors. Called with an \",[\"$r\",\"code\",null,{\"children\":\"error\"}],\" React throws, and an \",[\"$r\",\"code\",null,{\"children\":\"errorInfo\"}],\" object containing the \",[\"$r\",\"code\",null,{\"children\":\"componentStack\"}],\". Some recoverable errors may include the original error cause as \",[\"$r\",\"code\",null,{\"children\":\"error.cause\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"optional\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"identifierPrefix\"}],\": A string prefix React uses for IDs generated by \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useId\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useId\"}],\".\"]}],\" Useful to avoid conflicts when using multiple roots on the same page.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"返回值 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\" 返回一个带有两个方法的的对象，这两个方法是：\",[\"$r\",\"a\",null,{\"href\":\"#root-render\",\"children\":[\"$r\",\"code\",null,{\"children\":\"render\"}]}],\" 和 \",[\"$r\",\"a\",null,{\"href\":\"#root-unmount\",\"children\":[\"$r\",\"code\",null,{\"children\":\"unmount\"}]}],\"。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"注意 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"如果应用程序是服务端渲染的，那么不能使用 \",[\"$r\",\"code\",null,{\"children\":\"createRoot()\"}],\"。请使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/hydrateRoot\",\"children\":[\"$r\",\"code\",null,{\"children\":\"hydrateRoot()\"}]}],\" 替代它。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"在你的应用程序中，可能只调用了一次 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\"。但如果你使用了框架，它可能已经自动帮你完成了这次调用。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"当你想要渲染一段 JSX，但是它存在于 DOM 树的其他位置，并非当前组件的子组件时（比如，一个弹窗或者提示框），使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/createPortal\",\"children\":[\"$r\",\"code\",null,{\"children\":\"createPortal\"}]}],\" 替代 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\"。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"root-render\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.render(reactNode)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"调用 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 以将一段 \",[\"$r\",\"a\",null,{\"href\":\"/learn/writing-markup-with-jsx\",\"children\":\"JSX\"}],\"（“React 节点”）在 React 的根节点中渲染为 DOM 节点并显示。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"root.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React 将会在 \",[\"$r\",\"code\",null,{\"children\":\"根节点\"}],\" 中显示 \",[\"$r\",\"code\",null,{\"children\":\"<App />\"}],\" 组件，并且控制组件中的 DOM。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"参见下方更多示例\"}],\"。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-render-parameters\",\"children\":\"参数 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"reactNode\"}],\"：一个你想要显示的 \",[\"$r\",\"strong\",null,{\"children\":\"React 节点\"}],\"。它总是一段 JSX，就像 \",[\"$r\",\"code\",null,{\"children\":\"<App />\"}],\"，但是你也总是可以传递一个 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/createElement\",\"children\":[\"$r\",\"code\",null,{\"children\":\"createElement()\"}]}],\" 构造的 React 元素、一个字符串、一个数字、\",[\"$r\",\"code\",null,{\"children\":\"null\"}],\" 或者 \",[\"$r\",\"code\",null,{\"children\":\"undefined\"}],\"。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-render-returns\",\"children\":\"返回值 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 返回 \",[\"$r\",\"code\",null,{\"children\":\"undefined\"}],\"。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-render-caveats\",\"children\":\"注意 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"首次调用 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 时，React 会先清空根节点中所有已经存在的 HTML，然后才会渲染 React 组件。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"如果你的根节点包含了由 React 在构建期间通过服务端渲染生成的 HTML 内容，请使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/hydrateRoot\",\"children\":[\"$r\",\"code\",null,{\"children\":\"hydrateRoot()\"}]}],\" 替代这个方法，这样才能把事件处理程序和现有的 HTML 绑定。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"如果你在一个根节点上多次调用了 \",[\"$r\",\"code\",null,{\"children\":\"render\"}],\"，React 仍然会更新 DOM，这样才能保证显示的内容是最新的。React 将会筛选出可复用的部分和需要更新的部分，对于需要更新的部分，是 React 通过与之前渲染的树进行 \",[\"$r\",\"a\",null,{\"href\":\"/learn/preserving-and-resetting-state\",\"children\":\"“比较”\"}],\" 得到的。在同一个根节点上再次调用 \",[\"$r\",\"code\",null,{\"children\":\"render\"}],\" 就和在根节点上调用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#setstate\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" 函数\"]}],\" 类似：React 会避免没必要的 DOM 更新。\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"root-unmount\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount()\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"调用 \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" 以销毁 React 根节点中的一个已经渲染的树。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"root.unmount();\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"通常情况下，一个完全由 React 构建的应用程序不会调用 \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"此方法适用的场景是，React 根节点中的 DOM 节点（或者它的任何一个父级节点）被除了这个方法以外的代码移除了。举个例子，试想在一个 jQuery 选项卡面板中，非活跃状态的选项卡的 DOM 结构将被移除。一个标签页被移除时，它内部的所有内容（包括 React 根节点）也将会从 DOM 树移除。在这种情况下，你才需要调用 \",[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" 来通知 React “停止”控制已经被移除的根节点的内容。否则，被移除的根节点的内部组件就不能及时释放消息订阅等资源。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"调用 \",[\"$r\",\"code\",null,{\"children\":\"root.unmout\"}],\" 将卸载根节点内的所有组件，该根节点上的 React 将被剥离，即所有事件处理程序以及组件树上的状态将被移除。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-unmount-parameters\",\"children\":\"参数 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" 不接收任何参数。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-unmount-returns\",\"children\":\"返回值 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}],\" 返回 \",[\"$r\",\"code\",null,{\"children\":\"undefined\"}],\"。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"root-unmount-caveats\",\"children\":\"注意事项 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"调用 \",[\"$r\",\"code\",null,{\"children\":\"root.unmout\"}],\" 将卸载根节点内的所有组件，该根节点上的 React 将被剥离，即所有事件处理程序以及组件树上的状态将被移除。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"一旦调用 \",[\"$r\",\"code\",null,{\"children\":\"root.unmout\"}],\"，就不能在该根节点上调用 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\"。在一个已经卸载的根节点上尝试调用 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 将会抛出异常错误信息“无法更新一个未挂载的根节点（Cannot update an unmouted root）”。不过，你可以在卸载一个根节点后又重新创建它。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"用法 \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"rendering-an-app-fully-built-with-react\",\"children\":\"渲染一个完全由 React 构建的应用 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"如果应用程序是完全由 React 构建的，那么请为整个应用程序创建全局唯一的一个根节点。\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 3, \\\"document.getElementById('root')\\\"], [2, 4, \\\"<App />\\\"]]\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\n\\r\\nconst root = createRoot(document.getElementById('root'));\\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"通常情况下，在项目启动阶段，你只需要运行下面的代码。它将会：\"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"获取 HTML 中定义的\",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"DOM 节点\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"在该 DOM 节点中显示 \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"React 组件\"}],\"。\"]}],\"\\n\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"index.html\",\"children\":\"<!DOCTYPE html>\\r\\n<html>\\r\\n  <head><title>My app</title></head>\\r\\n  <body>\\r\\n    <!-- 这就是我们提到的 DOM 节点 -->\\r\\n    <div id=\\\"root\\\"></div>\\r\\n  </body>\\r\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\nimport App from './App.js';\\r\\nimport './styles.css';\\r\\n\\r\\nconst root = createRoot(document.getElementById('root'));\\r\\nroot.render(<App />);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\r\\n\\r\\nexport default function App() {\\r\\n  return (\\r\\n    <>\\r\\n      <h1>你好，世界!</h1>\\r\\n      <Counter />\\r\\n    </>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction Counter() {\\r\\n  const [count, setCount] = useState(0);\\r\\n  return (\\r\\n    <button onClick={() => setCount(count + 1)}>\\r\\n      点击了 {count} 次\\r\\n    </button>\\r\\n  );\\r\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"118\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[\"如果你的应用程序完全由 React 构建，你仅应该创建全局唯一的一个根节点，并只调用一次 \",[\"$r\",\"a\",null,{\"href\":\"#root-render\",\"children\":[\"$r\",\"code\",null,{\"children\":\"root.render\"}]}]]}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"从这时起，React 将会控制整个应用程序的 DOM。如果要添加更多组件，\",[\"$r\",\"a\",null,{\"href\":\"/learn/importing-and-exporting-components\",\"children\":[\"可以将它们嵌套进 \",[\"$r\",\"code\",null,{\"children\":\"App\"}],\" 组件中\"]}],\"。如果你需要更新视图，每一个组件都可以通过使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState\",\"children\":\"state\"}],\" 做到这一点。如果你需要额外显示一些在这个 DOM 节点之外的内容，比如一个弹窗或者提示框，那么可以 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/createPortal\",\"children\":\"使用 portal 进行渲染\"}],\"。\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":\"当 HTML 为空时，用户将会看一个空白的页面，直到应用程序中的 JavaScript 代码加载并运行：\"}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"children\":\"<div id=\\\"root\\\"></div>\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"这个过程太慢了！要解决这个问题，可以在 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/server\",\"children\":\"服务端或者应用构建期间\"}],\" 通过组件生成一些初始 HTML。这样一来，在 JavaScript 加载之前，用户就能看到一些文字、图片，也能点击链接。我们推荐 \",[\"$r\",\"a\",null,{\"href\":\"/learn/start-a-new-react-project#production-grade-react-frameworks\",\"children\":\"使用框架\"}],\"，通过框架开箱即用的能力轻易地完成这个优化。根据框架运行的时机，分为 \",[\"$r\",\"strong\",null,{\"children\":\"服务端渲染（SSR）\"}],\" 和 \",[\"$r\",\"strong\",null,{\"children\":\"静态站点生成（SSG）\"}],\"。\"]}]]}],\"\\n\",[\"$r\",\"Pitfall\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[\"使用了服务端渲染或者静态站点生成的应用程序，必须调用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/hydrateRoot\",\"children\":[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}]}],\" 而不是 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}]]}],\"。调用后，React 将会 \",[\"$r\",\"strong\",null,{\"children\":\"hydrate\"}],\" HTML 中的 DOM 节点，而不是销毁后重新创建它们。\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"rendering-a-page-partially-built-with-react\",\"children\":\"渲染一个部分由 React 构建的应用 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"如果页面 \",[\"$r\",\"a\",null,{\"href\":\"/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page\",\"children\":\"不完全是 React 构建的\"}],\"，可以多次调用 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\" 为每一个由 React 管理的顶级视图片段，即一段 DOM 中的顶级节点，创建一个根节点。可以在每一个根节点中调用 \",[\"$r\",\"a\",null,{\"href\":\"#root-render\",\"children\":[\"$r\",\"code\",null,{\"children\":\"root.render\"}]}],\" 来显示不同的内容。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"这样依赖，两个不同的 React 组件分别在同一个文件 \",[\"$r\",\"code\",null,{\"children\":\"index.html\"}],\" 内定义的两个 DOM 节点中被渲染：\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"public/index.html\",\"children\":\"<!DOCTYPE html>\\r\\n<html>\\r\\n  <head><title>My app</title></head>\\r\\n  <body>\\r\\n    <nav id=\\\"navigation\\\"></nav>\\r\\n    <main>\\r\\n      <p>这一段不会被 React 渲染（可以打开 index.html 验证这一点）。</p>\\r\\n      <section id=\\\"comments\\\"></section>\\r\\n    </main>\\r\\n  </body>\\r\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import './styles.css';\\r\\nimport { createRoot } from 'react-dom/client';\\r\\nimport { Comments, Navigation } from './Components.js';\\r\\n\\r\\nconst navDomNode = document.getElementById('navigation');\\r\\nconst navRoot = createRoot(navDomNode); \\r\\nnavRoot.render(<Navigation />);\\r\\n\\r\\nconst commentDomNode = document.getElementById('comments');\\r\\nconst commentRoot = createRoot(commentDomNode); \\r\\ncommentRoot.render(<Comments />);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Components.js\",\"children\":\"export function Navigation() {\\r\\n  return (\\r\\n    <ul>\\r\\n      <NavLink href=\\\"/\\\">Home</NavLink>\\r\\n      <NavLink href=\\\"/about\\\">About</NavLink>\\r\\n    </ul>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction NavLink({ href, children }) {\\r\\n  return (\\r\\n    <li>\\r\\n      <a href={href}>{children}</a>\\r\\n    </li>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport function Comments() {\\r\\n  return (\\r\\n    <>\\r\\n      <h2>Comments</h2>\\r\\n      <Comment text=\\\"你好!\\\" author=\\\"Sophie\\\" />\\r\\n      <Comment text=\\\"最近怎么样?\\\" author=\\\"Sunil\\\" />\\r\\n    </>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction Comment({ text, author }) {\\r\\n  return (\\r\\n    <p>{text} — <i>{author}</i></p>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"nav ul { padding: 0; margin: 0; }\\r\\nnav ul li { display: inline-block; margin-right: 20px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"136\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"也可以通过 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElement\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"document.createElement()\"}]}],\" 创建一个新的 DOM 节点然后手动将其加入页面文档之中。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const domNode = document.createElement('div');\\r\\nconst root = createRoot(domNode); \\r\\nroot.render(<Comment />);\\r\\ndocument.body.appendChild(domNode); // 你可以把它加入到页面文档的任何位置\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"调用 \",[\"$r\",\"a\",null,{\"href\":\"#root-unmount\",\"children\":[\"$r\",\"code\",null,{\"children\":\"root.unmount\"}]}],\" 将从 DOM 节点移除这个 React 树并清除它使用的资源。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"root.unmount();\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"如果 React 组件处于一个由不同框架构建的应用程序之中时，那么这个方法将会非常有用。\"}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-a-root-component\",\"children\":\"更新一个根组件 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"可以在同一个根节点上多次调用 \",[\"$r\",\"code\",null,{\"children\":\"render\"}],\"。只要当前的组件树结构与之前渲染的结果是一致的，React 将会 \",[\"$r\",\"a\",null,{\"href\":\"/learn/preserving-and-resetting-state\",\"children\":\"保存 state\"}],\"。仔细思考一下，为什么能在输入框中正常输入？正如下方的示例，在每一秒中内多次重复调用 \",[\"$r\",\"code\",null,{\"children\":\"render\"}],\" 后发生的更新，是非破坏性的：\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\nimport './styles.css';\\r\\nimport App from './App.js';\\r\\n\\r\\nconst root = createRoot(document.getElementById('root'));\\r\\n\\r\\nlet i = 0;\\r\\nsetInterval(() => {\\r\\n  root.render(<App counter={i} />);\\r\\n  i++;\\r\\n}, 1000);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"export default function App({counter}) {\\r\\n  return (\\r\\n    <>\\r\\n      <h1>你好，世界！{counter}</h1>\\r\\n      <input placeholder=\\\"在这里输入一些内容\\\" />\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"154\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"多次调用 \",[\"$r\",\"code\",null,{\"children\":\"render\"}],\" 是一个不常见的事情。通常情况下，你的组件将通过 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState\",\"children\":\"更新 state\"}],\" 达到同样的效果。\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"show-a-dialog-for-uncaught-errors\",\"children\":\"Show a dialog for uncaught errors \"}],\"\\n\",[\"$r\",\"Canary\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"onUncaughtError\"}],\" is only available in the latest React Canary release.\"]}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"By default, React will log all uncaught errors to the console. To implement your own error reporting, you can provide the optional \",[\"$r\",\"code\",null,{\"children\":\"onUncaughtError\"}],\" root option:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 6, \\\"onUncaughtError\\\"], [2, 6, \\\"error\\\", 1], [3, 6, \\\"errorInfo\\\"], [4, 10, \\\"componentStack\\\"]]\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\n\\r\\nconst root = createRoot(\\r\\n  document.getElementById('root'),\\r\\n  {\\r\\n    onUncaughtError: (error, errorInfo) => {\\r\\n      console.error(\\r\\n        'Uncaught error',\\r\\n        error,\\r\\n        errorInfo.componentStack\\r\\n      );\\r\\n    }\\r\\n  }\\r\\n);\\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"onUncaughtError\"}],\" option is a function called with two arguments:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"error\"}],\" that was thrown.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"An \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"errorInfo\"}],\" object that contains the \",[\"$r\",\"CodeStep\",null,{\"step\":4,\"children\":\"componentStack\"}],\" of the error.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can use the \",[\"$r\",\"code\",null,{\"children\":\"onUncaughtError\"}],\" root option to display error dialogs:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"index.html hidden\",\"children\":\"<!DOCTYPE html>\\r\\n<html>\\r\\n<head>\\r\\n  <title>My app</title>\\r\\n</head>\\r\\n<body>\\r\\n<!--\\r\\n  Error dialog in raw HTML\\r\\n  since an error in the React app may crash.\\r\\n-->\\r\\n<div id=\\\"error-dialog\\\" class=\\\"hidden\\\">\\r\\n  <h1 id=\\\"error-title\\\" class=\\\"text-red\\\"></h1>\\r\\n  <h3>\\r\\n    <pre id=\\\"error-message\\\"></pre>\\r\\n  </h3>\\r\\n  <p>\\r\\n    <pre id=\\\"error-body\\\"></pre>\\r\\n  </p>\\r\\n  <h4 class=\\\"-mb-20\\\">This error occurred at:</h4>\\r\\n  <pre id=\\\"error-component-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  <h4 class=\\\"mb-0\\\">Call stack:</h4>\\r\\n  <pre id=\\\"error-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  <div id=\\\"error-cause\\\">\\r\\n    <h4 class=\\\"mb-0\\\">Caused by:</h4>\\r\\n    <pre id=\\\"error-cause-message\\\"></pre>\\r\\n    <pre id=\\\"error-cause-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  </div>\\r\\n  <button\\r\\n    id=\\\"error-close\\\"\\r\\n    class=\\\"mb-10\\\"\\r\\n    onclick=\\\"document.getElementById('error-dialog').classList.add('hidden')\\\"\\r\\n  >\\r\\n    Close\\r\\n  </button>\\r\\n  <h3 id=\\\"error-not-dismissible\\\">This error is not dismissible.</h3>\\r\\n</div>\\r\\n<!-- This is the DOM node -->\\r\\n<div id=\\\"root\\\"></div>\\r\\n</body>\\r\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"meta\":\"src/styles.css active\",\"children\":\"label, button { display: block; margin-bottom: 20px; }\\r\\nhtml, body { min-height: 300px; }\\r\\n\\r\\n#error-dialog {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  bottom: 0;\\r\\n  left: 0;\\r\\n  background-color: white;\\r\\n  padding: 15px;\\r\\n  opacity: 0.9;\\r\\n  text-wrap: wrap;\\r\\n  overflow: scroll;\\r\\n}\\r\\n\\r\\n.text-red {\\r\\n  color: red;\\r\\n}\\r\\n\\r\\n.-mb-20 {\\r\\n  margin-bottom: -20px;\\r\\n}\\r\\n\\r\\n.mb-0 {\\r\\n  margin-bottom: 0;\\r\\n}\\r\\n\\r\\n.mb-10 {\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\npre {\\r\\n  text-wrap: wrap;\\r\\n}\\r\\n\\r\\npre.nowrap {\\r\\n  text-wrap: nowrap;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n display: none;  \\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/reportError.js hidden\",\"children\":\"function reportError({ title, error, componentStack, dismissable }) {\\r\\n  const errorDialog = document.getElementById(\\\"error-dialog\\\");\\r\\n  const errorTitle = document.getElementById(\\\"error-title\\\");\\r\\n  const errorMessage = document.getElementById(\\\"error-message\\\");\\r\\n  const errorBody = document.getElementById(\\\"error-body\\\");\\r\\n  const errorComponentStack = document.getElementById(\\\"error-component-stack\\\");\\r\\n  const errorStack = document.getElementById(\\\"error-stack\\\");\\r\\n  const errorClose = document.getElementById(\\\"error-close\\\");\\r\\n  const errorCause = document.getElementById(\\\"error-cause\\\");\\r\\n  const errorCauseMessage = document.getElementById(\\\"error-cause-message\\\");\\r\\n  const errorCauseStack = document.getElementById(\\\"error-cause-stack\\\");\\r\\n  const errorNotDismissible = document.getElementById(\\\"error-not-dismissible\\\");\\r\\n  \\r\\n  // Set the title\\r\\n  errorTitle.innerText = title;\\r\\n  \\r\\n  // Display error message and body\\r\\n  const [heading, body] = error.message.split(/\\\\n(.*)/s);\\r\\n  errorMessage.innerText = heading;\\r\\n  if (body) {\\r\\n    errorBody.innerText = body;\\r\\n  } else {\\r\\n    errorBody.innerText = '';\\r\\n  }\\r\\n\\r\\n  // Display component stack\\r\\n  errorComponentStack.innerText = componentStack;\\r\\n\\r\\n  // Display the call stack\\r\\n  // Since we already displayed the message, strip it, and the first Error: line.\\r\\n  errorStack.innerText = error.stack.replace(error.message, '').split(/\\\\n(.*)/s)[1];\\r\\n  \\r\\n  // Display the cause, if available\\r\\n  if (error.cause) {\\r\\n    errorCauseMessage.innerText = error.cause.message;\\r\\n    errorCauseStack.innerText = error.cause.stack;\\r\\n    errorCause.classList.remove('hidden');\\r\\n  } else {\\r\\n    errorCause.classList.add('hidden');\\r\\n  }\\r\\n  // Display the close button, if dismissible\\r\\n  if (dismissable) {\\r\\n    errorNotDismissible.classList.add('hidden');\\r\\n    errorClose.classList.remove(\\\"hidden\\\");\\r\\n  } else {\\r\\n    errorNotDismissible.classList.remove('hidden');\\r\\n    errorClose.classList.add(\\\"hidden\\\");\\r\\n  }\\r\\n  \\r\\n  // Show the dialog\\r\\n  errorDialog.classList.remove(\\\"hidden\\\");\\r\\n}\\r\\n\\r\\nexport function reportCaughtError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Caught Error\\\", error, componentStack,  dismissable: true});\\r\\n}\\r\\n\\r\\nexport function reportUncaughtError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Uncaught Error\\\", error, componentStack, dismissable: false });\\r\\n}\\r\\n\\r\\nexport function reportRecoverableError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Recoverable Error\\\", error, componentStack,  dismissable: true });\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { createRoot } from \\\"react-dom/client\\\";\\r\\nimport App from \\\"./App.js\\\";\\r\\nimport {reportUncaughtError} from \\\"./reportError\\\";\\r\\nimport \\\"./styles.css\\\";\\r\\n\\r\\nconst container = document.getElementById(\\\"root\\\");\\r\\nconst root = createRoot(container, {\\r\\n  onUncaughtError: (error, errorInfo) => {\\r\\n    if (error.message !== 'Known error') {\\r\\n      reportUncaughtError({\\r\\n        error,\\r\\n        componentStack: errorInfo.componentStack\\r\\n      });\\r\\n    }\\r\\n  }\\r\\n});\\r\\nroot.render(<App />);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\r\\n\\r\\nexport default function App() {\\r\\n  const [throwError, setThrowError] = useState(false);\\r\\n  \\r\\n  if (throwError) {\\r\\n    foo.bar = 'baz';\\r\\n  }\\r\\n  \\r\\n  return (\\r\\n    <div>\\r\\n      <span>This error shows the error dialog:</span>\\r\\n      <button onClick={() => setThrowError(true)}>\\r\\n        Throw error\\r\\n      </button>\\r\\n    </div>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\r\\n  \\\"dependencies\\\": {\\r\\n    \\\"react\\\": \\\"canary\\\",\\r\\n    \\\"react-dom\\\": \\\"canary\\\",\\r\\n    \\\"react-scripts\\\": \\\"^5.0.0\\\"\\r\\n  },\\r\\n  \\\"main\\\": \\\"/index.js\\\"\\r\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"170\",{\"children\":[\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-error-boundary-errors\",\"children\":\"Displaying Error Boundary errors \"}],\"\\n\",[\"$r\",\"Canary\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"onCaughtError\"}],\" is only available in the latest React Canary release.\"]}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"By default, React will log all errors caught by an Error Boundary to \",[\"$r\",\"code\",null,{\"children\":\"console.error\"}],\". To override this behavior, you can provide the optional \",[\"$r\",\"code\",null,{\"children\":\"onCaughtError\"}],\" root option to handle errors caught by an \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Component#catching-rendering-errors-with-an-error-boundary\",\"children\":\"Error Boundary\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 6, \\\"onCaughtError\\\"], [2, 6, \\\"error\\\", 1], [3, 6, \\\"errorInfo\\\"], [4, 10, \\\"componentStack\\\"]]\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\n\\r\\nconst root = createRoot(\\r\\n  document.getElementById('root'),\\r\\n  {\\r\\n    onCaughtError: (error, errorInfo) => {\\r\\n      console.error(\\r\\n        'Caught error',\\r\\n        error,\\r\\n        errorInfo.componentStack\\r\\n      );\\r\\n    }\\r\\n  }\\r\\n);\\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"onCaughtError\"}],\" option is a function called with two arguments:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"error\"}],\" that was caught by the boundary.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"An \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"errorInfo\"}],\" object that contains the \",[\"$r\",\"CodeStep\",null,{\"step\":4,\"children\":\"componentStack\"}],\" of the error.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can use the \",[\"$r\",\"code\",null,{\"children\":\"onCaughtError\"}],\" root option to display error dialogs or filter known errors from logging:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"index.html hidden\",\"children\":\"<!DOCTYPE html>\\r\\n<html>\\r\\n<head>\\r\\n  <title>My app</title>\\r\\n</head>\\r\\n<body>\\r\\n<!--\\r\\n  Error dialog in raw HTML\\r\\n  since an error in the React app may crash.\\r\\n-->\\r\\n<div id=\\\"error-dialog\\\" class=\\\"hidden\\\">\\r\\n  <h1 id=\\\"error-title\\\" class=\\\"text-red\\\"></h1>\\r\\n  <h3>\\r\\n    <pre id=\\\"error-message\\\"></pre>\\r\\n  </h3>\\r\\n  <p>\\r\\n    <pre id=\\\"error-body\\\"></pre>\\r\\n  </p>\\r\\n  <h4 class=\\\"-mb-20\\\">This error occurred at:</h4>\\r\\n  <pre id=\\\"error-component-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  <h4 class=\\\"mb-0\\\">Call stack:</h4>\\r\\n  <pre id=\\\"error-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  <div id=\\\"error-cause\\\">\\r\\n    <h4 class=\\\"mb-0\\\">Caused by:</h4>\\r\\n    <pre id=\\\"error-cause-message\\\"></pre>\\r\\n    <pre id=\\\"error-cause-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  </div>\\r\\n  <button\\r\\n    id=\\\"error-close\\\"\\r\\n    class=\\\"mb-10\\\"\\r\\n    onclick=\\\"document.getElementById('error-dialog').classList.add('hidden')\\\"\\r\\n  >\\r\\n    Close\\r\\n  </button>\\r\\n  <h3 id=\\\"error-not-dismissible\\\">This error is not dismissible.</h3>\\r\\n</div>\\r\\n<!-- This is the DOM node -->\\r\\n<div id=\\\"root\\\"></div>\\r\\n</body>\\r\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"meta\":\"src/styles.css active\",\"children\":\"label, button { display: block; margin-bottom: 20px; }\\r\\nhtml, body { min-height: 300px; }\\r\\n\\r\\n#error-dialog {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  bottom: 0;\\r\\n  left: 0;\\r\\n  background-color: white;\\r\\n  padding: 15px;\\r\\n  opacity: 0.9;\\r\\n  text-wrap: wrap;\\r\\n  overflow: scroll;\\r\\n}\\r\\n\\r\\n.text-red {\\r\\n  color: red;\\r\\n}\\r\\n\\r\\n.-mb-20 {\\r\\n  margin-bottom: -20px;\\r\\n}\\r\\n\\r\\n.mb-0 {\\r\\n  margin-bottom: 0;\\r\\n}\\r\\n\\r\\n.mb-10 {\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\npre {\\r\\n  text-wrap: wrap;\\r\\n}\\r\\n\\r\\npre.nowrap {\\r\\n  text-wrap: nowrap;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n display: none;  \\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/reportError.js hidden\",\"children\":\"function reportError({ title, error, componentStack, dismissable }) {\\r\\n  const errorDialog = document.getElementById(\\\"error-dialog\\\");\\r\\n  const errorTitle = document.getElementById(\\\"error-title\\\");\\r\\n  const errorMessage = document.getElementById(\\\"error-message\\\");\\r\\n  const errorBody = document.getElementById(\\\"error-body\\\");\\r\\n  const errorComponentStack = document.getElementById(\\\"error-component-stack\\\");\\r\\n  const errorStack = document.getElementById(\\\"error-stack\\\");\\r\\n  const errorClose = document.getElementById(\\\"error-close\\\");\\r\\n  const errorCause = document.getElementById(\\\"error-cause\\\");\\r\\n  const errorCauseMessage = document.getElementById(\\\"error-cause-message\\\");\\r\\n  const errorCauseStack = document.getElementById(\\\"error-cause-stack\\\");\\r\\n  const errorNotDismissible = document.getElementById(\\\"error-not-dismissible\\\");\\r\\n\\r\\n  // Set the title\\r\\n  errorTitle.innerText = title;\\r\\n\\r\\n  // Display error message and body\\r\\n  const [heading, body] = error.message.split(/\\\\n(.*)/s);\\r\\n  errorMessage.innerText = heading;\\r\\n  if (body) {\\r\\n    errorBody.innerText = body;\\r\\n  } else {\\r\\n    errorBody.innerText = '';\\r\\n  }\\r\\n\\r\\n  // Display component stack\\r\\n  errorComponentStack.innerText = componentStack;\\r\\n\\r\\n  // Display the call stack\\r\\n  // Since we already displayed the message, strip it, and the first Error: line.\\r\\n  errorStack.innerText = error.stack.replace(error.message, '').split(/\\\\n(.*)/s)[1];\\r\\n\\r\\n  // Display the cause, if available\\r\\n  if (error.cause) {\\r\\n    errorCauseMessage.innerText = error.cause.message;\\r\\n    errorCauseStack.innerText = error.cause.stack;\\r\\n    errorCause.classList.remove('hidden');\\r\\n  } else {\\r\\n    errorCause.classList.add('hidden');\\r\\n  }\\r\\n  // Display the close button, if dismissible\\r\\n  if (dismissable) {\\r\\n    errorNotDismissible.classList.add('hidden');\\r\\n    errorClose.classList.remove(\\\"hidden\\\");\\r\\n  } else {\\r\\n    errorNotDismissible.classList.remove('hidden');\\r\\n    errorClose.classList.add(\\\"hidden\\\");\\r\\n  }\\r\\n\\r\\n  // Show the dialog\\r\\n  errorDialog.classList.remove(\\\"hidden\\\");\\r\\n}\\r\\n\\r\\nexport function reportCaughtError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Caught Error\\\", error, componentStack,  dismissable: true});\\r\\n}\\r\\n\\r\\nexport function reportUncaughtError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Uncaught Error\\\", error, componentStack, dismissable: false });\\r\\n}\\r\\n\\r\\nexport function reportRecoverableError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Recoverable Error\\\", error, componentStack,  dismissable: true });\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { createRoot } from \\\"react-dom/client\\\";\\r\\nimport App from \\\"./App.js\\\";\\r\\nimport {reportCaughtError} from \\\"./reportError\\\";\\r\\nimport \\\"./styles.css\\\";\\r\\n\\r\\nconst container = document.getElementById(\\\"root\\\");\\r\\nconst root = createRoot(container, {\\r\\n  onCaughtError: (error, errorInfo) => {\\r\\n    if (error.message !== 'Known error') {\\r\\n      reportCaughtError({\\r\\n        error, \\r\\n        componentStack: errorInfo.componentStack,\\r\\n      });\\r\\n    }\\r\\n  }\\r\\n});\\r\\nroot.render(<App />);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\r\\nimport { ErrorBoundary } from \\\"react-error-boundary\\\";\\r\\n\\r\\nexport default function App() {\\r\\n  const [error, setError] = useState(null);\\r\\n  \\r\\n  function handleUnknown() {\\r\\n    setError(\\\"unknown\\\");\\r\\n  }\\r\\n\\r\\n  function handleKnown() {\\r\\n    setError(\\\"known\\\");\\r\\n  }\\r\\n  \\r\\n  return (\\r\\n    <>\\r\\n      <ErrorBoundary\\r\\n        fallbackRender={fallbackRender}\\r\\n        onReset={(details) => {\\r\\n          setError(null);\\r\\n        }}\\r\\n      >\\r\\n        {error != null && <Throw error={error} />}\\r\\n        <span>This error will not show the error dialog:</span>\\r\\n        <button onClick={handleKnown}>\\r\\n          Throw known error\\r\\n        </button>\\r\\n        <span>This error will show the error dialog:</span>\\r\\n        <button onClick={handleUnknown}>\\r\\n          Throw unknown error\\r\\n        </button>\\r\\n      </ErrorBoundary>\\r\\n      \\r\\n    </>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction fallbackRender({ resetErrorBoundary }) {\\r\\n  return (\\r\\n    <div role=\\\"alert\\\">\\r\\n      <h3>Error Boundary</h3>\\r\\n      <p>Something went wrong.</p>\\r\\n      <button onClick={resetErrorBoundary}>Reset</button>\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction Throw({error}) {\\r\\n  if (error === \\\"known\\\") {\\r\\n    throw new Error('Known error')\\r\\n  } else {\\r\\n    foo.bar = 'baz';\\r\\n  }\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\r\\n  \\\"dependencies\\\": {\\r\\n    \\\"react\\\": \\\"canary\\\",\\r\\n    \\\"react-dom\\\": \\\"canary\\\",\\r\\n    \\\"react-scripts\\\": \\\"^5.0.0\\\",\\r\\n    \\\"react-error-boundary\\\": \\\"4.0.3\\\"\\r\\n  },\\r\\n  \\\"main\\\": \\\"/index.js\\\"\\r\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"184\",{\"children\":[\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-a-dialog-for-recoverable-errors\",\"children\":\"Displaying a dialog for recoverable errors \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React may automatically render a component a second time to attempt to recover from an error thrown in render. If successful, React will log a recoverable error to the console to notify the developer. To override this behavior, you can provide the optional \",[\"$r\",\"code\",null,{\"children\":\"onRecoverableError\"}],\" root option:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 6, \\\"onRecoverableError\\\"], [2, 6, \\\"error\\\", 1], [3, 10, \\\"error.cause\\\"], [4, 6, \\\"errorInfo\\\"], [5, 11, \\\"componentStack\\\"]]\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\n\\r\\nconst root = createRoot(\\r\\n  document.getElementById('root'),\\r\\n  {\\r\\n    onRecoverableError: (error, errorInfo) => {\\r\\n      console.error(\\r\\n        'Recoverable error',\\r\\n        error,\\r\\n        error.cause,\\r\\n        errorInfo.componentStack,\\r\\n      );\\r\\n    }\\r\\n  }\\r\\n);\\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"onRecoverableError\"}],\" option is a function called with two arguments:\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"The \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"error\"}],\" that React throws. Some errors may include the original cause as \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"error.cause\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"An \",[\"$r\",\"CodeStep\",null,{\"step\":4,\"children\":\"errorInfo\"}],\" object that contains the \",[\"$r\",\"CodeStep\",null,{\"step\":5,\"children\":\"componentStack\"}],\" of the error.\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"You can use the \",[\"$r\",\"code\",null,{\"children\":\"onRecoverableError\"}],\" root option to display error dialogs:\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-html\",\"meta\":\"index.html hidden\",\"children\":\"<!DOCTYPE html>\\r\\n<html>\\r\\n<head>\\r\\n  <title>My app</title>\\r\\n</head>\\r\\n<body>\\r\\n<!--\\r\\n  Error dialog in raw HTML\\r\\n  since an error in the React app may crash.\\r\\n-->\\r\\n<div id=\\\"error-dialog\\\" class=\\\"hidden\\\">\\r\\n  <h1 id=\\\"error-title\\\" class=\\\"text-red\\\"></h1>\\r\\n  <h3>\\r\\n    <pre id=\\\"error-message\\\"></pre>\\r\\n  </h3>\\r\\n  <p>\\r\\n    <pre id=\\\"error-body\\\"></pre>\\r\\n  </p>\\r\\n  <h4 class=\\\"-mb-20\\\">This error occurred at:</h4>\\r\\n  <pre id=\\\"error-component-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  <h4 class=\\\"mb-0\\\">Call stack:</h4>\\r\\n  <pre id=\\\"error-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  <div id=\\\"error-cause\\\">\\r\\n    <h4 class=\\\"mb-0\\\">Caused by:</h4>\\r\\n    <pre id=\\\"error-cause-message\\\"></pre>\\r\\n    <pre id=\\\"error-cause-stack\\\" class=\\\"nowrap\\\"></pre>\\r\\n  </div>\\r\\n  <button\\r\\n    id=\\\"error-close\\\"\\r\\n    class=\\\"mb-10\\\"\\r\\n    onclick=\\\"document.getElementById('error-dialog').classList.add('hidden')\\\"\\r\\n  >\\r\\n    Close\\r\\n  </button>\\r\\n  <h3 id=\\\"error-not-dismissible\\\">This error is not dismissible.</h3>\\r\\n</div>\\r\\n<!-- This is the DOM node -->\\r\\n<div id=\\\"root\\\"></div>\\r\\n</body>\\r\\n</html>\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"meta\":\"src/styles.css active\",\"children\":\"label, button { display: block; margin-bottom: 20px; }\\r\\nhtml, body { min-height: 300px; }\\r\\n\\r\\n#error-dialog {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  bottom: 0;\\r\\n  left: 0;\\r\\n  background-color: white;\\r\\n  padding: 15px;\\r\\n  opacity: 0.9;\\r\\n  text-wrap: wrap;\\r\\n  overflow: scroll;\\r\\n}\\r\\n\\r\\n.text-red {\\r\\n  color: red;\\r\\n}\\r\\n\\r\\n.-mb-20 {\\r\\n  margin-bottom: -20px;\\r\\n}\\r\\n\\r\\n.mb-0 {\\r\\n  margin-bottom: 0;\\r\\n}\\r\\n\\r\\n.mb-10 {\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\npre {\\r\\n  text-wrap: wrap;\\r\\n}\\r\\n\\r\\npre.nowrap {\\r\\n  text-wrap: nowrap;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n display: none;  \\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/reportError.js hidden\",\"children\":\"function reportError({ title, error, componentStack, dismissable }) {\\r\\n  const errorDialog = document.getElementById(\\\"error-dialog\\\");\\r\\n  const errorTitle = document.getElementById(\\\"error-title\\\");\\r\\n  const errorMessage = document.getElementById(\\\"error-message\\\");\\r\\n  const errorBody = document.getElementById(\\\"error-body\\\");\\r\\n  const errorComponentStack = document.getElementById(\\\"error-component-stack\\\");\\r\\n  const errorStack = document.getElementById(\\\"error-stack\\\");\\r\\n  const errorClose = document.getElementById(\\\"error-close\\\");\\r\\n  const errorCause = document.getElementById(\\\"error-cause\\\");\\r\\n  const errorCauseMessage = document.getElementById(\\\"error-cause-message\\\");\\r\\n  const errorCauseStack = document.getElementById(\\\"error-cause-stack\\\");\\r\\n  const errorNotDismissible = document.getElementById(\\\"error-not-dismissible\\\");\\r\\n\\r\\n  // Set the title\\r\\n  errorTitle.innerText = title;\\r\\n\\r\\n  // Display error message and body\\r\\n  const [heading, body] = error.message.split(/\\\\n(.*)/s);\\r\\n  errorMessage.innerText = heading;\\r\\n  if (body) {\\r\\n    errorBody.innerText = body;\\r\\n  } else {\\r\\n    errorBody.innerText = '';\\r\\n  }\\r\\n\\r\\n  // Display component stack\\r\\n  errorComponentStack.innerText = componentStack;\\r\\n\\r\\n  // Display the call stack\\r\\n  // Since we already displayed the message, strip it, and the first Error: line.\\r\\n  errorStack.innerText = error.stack.replace(error.message, '').split(/\\\\n(.*)/s)[1];\\r\\n\\r\\n  // Display the cause, if available\\r\\n  if (error.cause) {\\r\\n    errorCauseMessage.innerText = error.cause.message;\\r\\n    errorCauseStack.innerText = error.cause.stack;\\r\\n    errorCause.classList.remove('hidden');\\r\\n  } else {\\r\\n    errorCause.classList.add('hidden');\\r\\n  }\\r\\n  // Display the close button, if dismissible\\r\\n  if (dismissable) {\\r\\n    errorNotDismissible.classList.add('hidden');\\r\\n    errorClose.classList.remove(\\\"hidden\\\");\\r\\n  } else {\\r\\n    errorNotDismissible.classList.remove('hidden');\\r\\n    errorClose.classList.add(\\\"hidden\\\");\\r\\n  }\\r\\n\\r\\n  // Show the dialog\\r\\n  errorDialog.classList.remove(\\\"hidden\\\");\\r\\n}\\r\\n\\r\\nexport function reportCaughtError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Caught Error\\\", error, componentStack,  dismissable: true});\\r\\n}\\r\\n\\r\\nexport function reportUncaughtError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Uncaught Error\\\", error, componentStack, dismissable: false });\\r\\n}\\r\\n\\r\\nexport function reportRecoverableError({error, cause, componentStack}) {\\r\\n  reportError({ title: \\\"Recoverable Error\\\", error, componentStack,  dismissable: true });\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js active\",\"children\":\"import { createRoot } from \\\"react-dom/client\\\";\\r\\nimport App from \\\"./App.js\\\";\\r\\nimport {reportRecoverableError} from \\\"./reportError\\\";\\r\\nimport \\\"./styles.css\\\";\\r\\n\\r\\nconst container = document.getElementById(\\\"root\\\");\\r\\nconst root = createRoot(container, {\\r\\n  onRecoverableError: (error, errorInfo) => {\\r\\n    reportRecoverableError({\\r\\n      error,\\r\\n      cause: error.cause,\\r\\n      componentStack: errorInfo.componentStack,\\r\\n    });\\r\\n  }\\r\\n});\\r\\nroot.render(<App />);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\r\\nimport { ErrorBoundary } from \\\"react-error-boundary\\\";\\r\\n\\r\\n// 🚩 Bug: Never do this. This will force an error.\\r\\nlet errorThrown = false;\\r\\nexport default function App() {\\r\\n  return (\\r\\n    <>\\r\\n      <ErrorBoundary\\r\\n        fallbackRender={fallbackRender}\\r\\n      >\\r\\n        {!errorThrown && <Throw />}\\r\\n        <p>This component threw an error, but recovered during a second render.</p>\\r\\n        <p>Since it recovered, no Error Boundary was shown, but <code>onRecoverableError</code> was used to show an error dialog.</p>\\r\\n      </ErrorBoundary>\\r\\n      \\r\\n    </>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction fallbackRender() {\\r\\n  return (\\r\\n    <div role=\\\"alert\\\">\\r\\n      <h3>Error Boundary</h3>\\r\\n      <p>Something went wrong.</p>\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction Throw({error}) {\\r\\n  // Simulate an external value changing during concurrent render.\\r\\n  errorThrown = true;\\r\\n  foo.bar = 'baz';\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\r\\n  \\\"dependencies\\\": {\\r\\n    \\\"react\\\": \\\"canary\\\",\\r\\n    \\\"react-dom\\\": \\\"canary\\\",\\r\\n    \\\"react-scripts\\\": \\\"^5.0.0\\\",\\r\\n    \\\"react-error-boundary\\\": \\\"4.0.3\\\"\\r\\n  },\\r\\n  \\\"main\\\": \\\"/index.js\\\"\\r\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"错误排查 \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"ive-created-a-root-but-nothing-is-displayed\",\"children\":\"我已经创建了一个根节点，但是页面没有显示任何内容 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"确保你没有忘记在根节点上 \",[\"$r\",\"strong\",null,{\"children\":\"渲染\"}],\" 你的应用程序：\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5}\",\"children\":\"import { createRoot } from 'react-dom/client';\\r\\nimport App from './App.js';\\r\\n\\r\\nconst root = createRoot(document.getElementById('root'));\\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"在你进行渲染之前，页面不会显示任何内容。\"}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"im-getting-an-error-you-passed-a-second-argument-to-root-render\",\"children\":\"I’m getting an error: “You passed a second argument to root.render” \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"A common mistake is to pass the options for \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\" to \",[\"$r\",\"code\",null,{\"children\":\"root.render(...)\"}],\":\"]}],\"\\n\",[\"$r\",\"ConsoleBlock\",null,{\"level\":\"error\",\"children\":[\"$r\",\"p\",null,{\"children\":\"Warning: You passed a second argument to root.render(…) but it only accepts one argument.\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"To fix, pass the root options to \",[\"$r\",\"code\",null,{\"children\":\"createRoot(...)\"}],\", not \",[\"$r\",\"code\",null,{\"children\":\"root.render(...)\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,5}\",\"children\":\"// 🚩 Wrong: root.render only takes one argument.\\r\\nroot.render(App, {onUncaughtError});\\r\\n\\r\\n// ✅ Correct: pass options to createRoot.\\r\\nconst root = createRoot(container, {onUncaughtError}); \\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"im-getting-an-error-target-container-is-not-a-dom-element\",\"children\":\"I’m getting an error: “Target container is not a DOM element” \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"这个异常错误即字面意思，你传递给 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\" 的内容不是一个 DOM 元素。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"如果你不确定发生了什么，试着在控制台打印它：\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2}\",\"children\":\"const domNode = document.getElementById('root');\\r\\nconsole.log(domNode); // ？？？\\r\\nconst root = createRoot(domNode);\\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"举个例子，如果 \",[\"$r\",\"code\",null,{\"children\":\"domNode\"}],\" 是 \",[\"$r\",\"code\",null,{\"children\":\"null\"}],\"，代表着 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/getElementById\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"getElementById\"}]}],\" 返回了 \",[\"$r\",\"code\",null,{\"children\":\"null\"}],\"。这意味着你在调用这个方法的时候，页面文档内并不存在指定的 id 对应的元素，于是就出现了这个问题。这里有一些可能的原因：\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"你使用的 id 可能和 HTML 文件中的 id 不同。请检查一下你的拼写是否正确！\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"打包构建产物的 HTML 文件中的 \",[\"$r\",\"code\",null,{\"children\":\"<script>\"}],\" 标签，不能感知到在它执行 \",[\"$r\",\"strong\",null,{\"children\":\"之后\"}],\" 才出现的 DOM 节点。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"触发这个异常报错的另一个常见方式是，将 \",[\"$r\",\"code\",null,{\"children\":\"createRoot(domNode)\"}],\" 错写成 \",[\"$r\",\"code\",null,{\"children\":\"createRoot(<App />)\"}],\"。\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"im-getting-an-error-functions-are-not-valid-as-a-react-child\",\"children\":\"我得到了一个异常报错信息：“函数不是合法的 React 子项（Functions are not valid as a React child）” \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"这个错误意味着，你传递给 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 的内容不是一个 React 组件。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"这可能发生在你使用 \",[\"$r\",\"code\",null,{\"children\":\"Component\"}],\" 而不是 \",[\"$r\",\"code\",null,{\"children\":\"<Component />\"}],\" 作为参数对 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 进行调用时：\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,5}\",\"children\":\"// 🚩 错误方式：App 是一个函数，不是一个组件。\\r\\nroot.render(App);\\r\\n\\r\\n// ✅ 正确方式：<App /> 是一个组件。\\r\\nroot.render(<App />);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"或者你向 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 传递了一个函数本身，而不是其返回值：\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,5}\",\"children\":\"// 🚩 错误方式：createApp 是一个函数，不是一个组件。\\r\\nroot.render(createApp);\\r\\n\\r\\n// ✅ 正确方式：使用 createApp 执行后返回的组件。\\r\\nroot.render(createApp());\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"我的服务端渲染的-html-在更新时会全部重新创建\",\"children\":\"我的服务端渲染的 HTML 在更新时会全部重新创建 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"如果你的应用程序是服务端渲染的，并且包含了由 React 生成的初始 HTML，你可能会注意到，在创建一个根节点后调用 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 时会删除所有初始 HTML，然后重新生成所有 DOM 节点。这可能会让你的应用变得比客户端渲染更慢，并且在用户输入失去焦点和滑动滚动条时丢失用户输入的内容。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"服务端渲染的应用程序必须使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/hydrateRoot\",\"children\":[\"$r\",\"code\",null,{\"children\":\"hydrateRoot\"}]}],\" 替代 \",[\"$r\",\"code\",null,{\"children\":\"createRoot\"}],\"：\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,4-7}\",\"children\":\"import { hydrateRoot } from 'react-dom/client';\\r\\nimport App from './App.js';\\r\\n\\r\\nhydrateRoot(\\r\\n  document.getElementById('root'),\\r\\n  <App />\\r\\n);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"请注意，服务端渲染的 API 是不同的。特别注意，在通常情况下，不会再有 \",[\"$r\",\"code\",null,{\"children\":\"root.render\"}],\" 调用。\"]}]]}]]","meta":{"title":"createRoot"},"languages":null},"__N_SSG":true}